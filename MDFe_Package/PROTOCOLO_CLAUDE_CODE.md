# 🤖 PROTOCOLO DE USO - Claude Code

## 🎯 **COMANDO AUTOMÁTICO**

Para implementação automática do MDFe em qualquer projeto ASP.NET, use o comando:

```
"leia o MDFe_Package"
```

## ⚡ **EXECUÇÃO AUTOMÁTICA**

Ao receber o comando acima, o Claude Code irá **automaticamente**:

### **1️⃣ ANÁLISE INICIAL (2-3 minutos)**
- ✅ Ler toda documentação do MDFe_Package
- ✅ Analisar estrutura do projeto atual
- ✅ Identificar arquitetura e padrões utilizados
- ✅ Mapear cadastros e entidades existentes

### **2️⃣ PLANEJAMENTO AUTOMÁTICO**
- ✅ Criar plano de implementação completo
- ✅ Definir adaptações necessárias aos cadastros
- ✅ Identificar migrações de banco necessárias
- ✅ Planejar configurações e endpoints

### **3️⃣ IMPLEMENTAÇÃO DIRETA**
- ✅ Instalar DLLs ACBr na arquitetura correta
- ✅ Configurar certificados e ambiente SEFAZ
- ✅ Adaptar MDFeService aos cadastros do projeto
- ✅ Criar/adaptar Controllers e endpoints API
- ✅ Configurar templates INI dinâmicos
- ✅ Implementar mapeamentos código/descrição
- ✅ Criar migrações de banco se necessário
- ✅ Configurar injeção de dependência
- ✅ Testar fluxo completo de emissão

## 🚫 **COMPORTAMENTO GARANTIDO**

### **SEM INTERAÇÃO MANUAL:**
- ❌ Zero perguntas sobre "como implementar"
- ❌ Zero perguntas sobre "onde colocar"
- ❌ Zero perguntas sobre "qual abordagem usar"
- ❌ Zero solicitações de esclarecimento

### **COM EXECUÇÃO DIRETA:**
- ✅ Implementação baseada na documentação do pacote
- ✅ Adaptação aos padrões do projeto existente
- ✅ Seguimento da ordem exata dos métodos ACBr
- ✅ Uso correto dos códigos numéricos SEFAZ
- ✅ Integração com cadastros pré-definidos

## 🎯 **RESULTADO ESPERADO**

Após a execução automática:

### **MDFe Funcionando Completamente:**
- ✅ Geração de MDFe a partir de cadastros
- ✅ Transmissão para SEFAZ (homologação/produção)
- ✅ Consulta por chave de acesso
- ✅ Cancelamento com justificativa
- ✅ Encerramento de viagem
- ✅ Consulta de não encerrados
- ✅ Status do serviço SEFAZ

### **Integração com Sistema:**
- ✅ Endpoints API prontos para uso
- ✅ Seleção por ComboBox (ID dos cadastros)
- ✅ Templates dinâmicos com dados do banco
- ✅ Mapeamento correto código/descrição
- ✅ Validações e tratamento de erros

### **Configuração Completa:**
- ✅ DLLs ACBr instaladas e funcionando
- ✅ Certificados digitais configurados
- ✅ Ambientes homologação/produção
- ✅ Schemas XSD para validação local
- ✅ Logging e monitoramento

## 📋 **PRÉ-REQUISITOS**

Para funcionamento perfeito:

### **Projeto ASP.NET:**
- ✅ .NET 6.0+ ou .NET Framework 4.8+
- ✅ Entity Framework ou Dapper configurado
- ✅ Cadastros básicos (Emitente, Veículo, Condutor)
- ✅ Injeção de dependência ativa

### **Infraestrutura:**
- ✅ Windows Server ou desktop
- ✅ Certificado digital A1 ou A3
- ✅ Conectividade com SEFAZ
- ✅ Banco de dados ativo

## 🚀 **EXEMPLO DE USO**

```
Desenvolvedor: "leia o MDFe_Package"

Claude Code: [Inicia automaticamente]
- Lendo documentação...
- Analisando projeto...
- Criando plano...
- Implementando MDFeService...
- Configurando endpoints...
- Testando emissão...
- ✅ MDFe implementado com sucesso!
```

## ⚖️ **GARANTIAS**

### **✅ O QUE SERÁ FEITO:**
- Implementação completa e funcional
- Seguimento rigoroso da documentação
- Adaptação aos padrões do projeto
- Zero configuração manual necessária

### **❌ O QUE NÃO SERÁ FEITO:**
- Perguntas desnecessárias
- Implementações incompletas
- Soluções genéricas sem adaptação
- Código sem seguir os padrões ACBr

---

## 🏆 **CONCLUSÃO**

Este protocolo garante **implementação automática, completa e funcional** do MDFe em qualquer projeto ASP.NET, seguindo exatamente as especificações da ACBrLibMDFe v1.2.2.337 e Nota Técnica 2025.001.

**Basta uma mensagem: implementação completa garantida!** 🚀

---

*Protocolo criado para facilitar implementações MDFe com Claude Code - Setembro 2025*